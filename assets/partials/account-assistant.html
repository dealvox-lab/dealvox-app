<div class="card">
  <!-- STEP 1: Initial deploy state (no assistant yet) -->
  <section id="assistantInitial" class="asst-section">
    <h3 style="margin-top:0;">Deploy your assistant</h3>
    <p class="muted" style="font-size:0.85rem;margin-bottom:14px;">
      Set up your AI agent basics. We’ll deploy the model and then you can fine-tune details in the assistant settings.
    </p>

    <form id="assistantDeployForm">
      <div class="grid-2">
        <!-- LEFT COLUMN -->
        <div>
          <div class="field">
            <label for="asstNewName">Agent name</label>
            <input id="asstNewName" class="input" placeholder="Jake">
          </div>

          <div class="field">
            <label for="asstNewType">Agent type</label>
            <select id="asstNewType" class="input">
              <option value="conversation_flow_381392a33119">The Empathizer</option>
              <option value="conversation_flow_381392a33119">The Challenger</option>
              <option value="conversation_flow_381392a33119">The Driver</option>
              <option value="conversation_flow_381392a33119">The Analyst</option>
              <option value="conversation_flow_381392a33119">The Storyteller</option>
            </select>
          </div>

          <div class="field">
            <label for="asstNewVoice">Agent voice</label>
            <select id="asstNewVoice" class="input">
              <option value='11labs-Billy'>Billy - male, young</option>
              <option value='11labs-Lily'>Lily - female, young</option>
              <option value='11labs-Marissa'>Marissa - female, young</option>
              <option value='11labs-Bing'>Bing - male, young</option>
              <option value='11labs-Jenny'>Jenny - female, young</option>
              <option value='11labs-Lucas'>Lucas - male, middle-aged</option>
              <option value='11labs-Brian'>Brian - male, young</option>
              <option value='11labs-Kate'>Kate - female, middle-aged</option>
              <option value='11labs-Jason'>Jason - male, young</option>
              <option value='11labs-Ethan'>Ethan - male, young</option>
              <option value='11labs-Paul'>Paul - male, old</option>
              <option value='11labs-John'>John - male, middle-aged</option>
              <option value='11labs-Adrian'>Adrian - male, young</option>
              <option value='11labs-Gilfoy'>Gilfoy - male, middle-aged</option>
              <option value='11labs-Zuri'>Zuri - female, old</option>
              <option value='11labs-Steve'>Steve - male, old</option>
              <option value='11labs-Grace'>Grace - female, middle-aged</option>
              <option value='11labs-Chloe'>Chloe - female, young</option>
              <option value='11labs-Max'>Max - male, middle-aged</option>
              <option value='11labs-Anna'>Anna - female, young</option>
              <option value='11labs-Julia'>Julia - female, middle-aged</option>
              <option value='11labs-victoria'>Victoria - female, young</option>
              <option value='11labs-Susan'>Susan - female, middle-aged</option>
              <option value='11labs-Emily'>Emily - female, middle-aged</option>
              <option value='11labs-Kathrine'>Kathrine - female, middle-aged</option>
              <option value='11labs-Andrew'>Andrew - male, young</option>
              <option value='11labs-Nina'>Nina - female, middle-aged</option>
              <option value='11labs-Myra'>Myra - female, young</option>
              <option value='11labs-Evie'>Evie - female, young</option>
              <option value='11labs-James'>James - male, old</option>
              <option value='11labs-Cimo'>Cimo - female, middle-aged</option>
              <option value='11labs-Ryan'>Ryan - male, young</option>
              <option value='11labs-Mia'>Mia - female, middle-aged</option>
            </select>
          </div>
        </div>

        <!-- RIGHT COLUMN: no Intro anymore -->
        <div>
          <p class="muted" style="font-size:0.85rem;margin: 30px 50px 0;">
            When you click <strong>Deploy agent</strong>, we’ll trigger a backend deployment flow
            for this user and configuration. The deployment will take 3-4 minutes, and you'll be redirected to the assistant fine-tuning section after that.
          </p>
        </div>
      </div>
  <div style="margin-top:18px;display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
  <button type="submit" class="btn-primary" id="asstDeployBtn">
    Deploy assistant
  </button>

  <!-- Loader + note, hidden by default -->
  <span id="asstDeployLoader"
        style="display:none;align-items:center;gap:8px;">
    <span class="spinner"></span>
    <span id="asstDeployNote"
          class="muted"
          style="font-size:0.85rem;">
      Customizing your model…
    </span>
  </span>
</div>
    </form>
  </section>
<!-- STEP 2: Manage existing assistant -->
<section id="assistantManage" class="asst-section" hidden>
  <form id="assistantForm">
    <div class="grid-2">
      <!-- LEFT COLUMN -->
      <div>
        <div class="field">
          <label for="asstAgentId">Assistant ID</label>
          <input id="asstAgentId" class="input" readonly>
        </div>

        <div class="field">
          <label for="asstAgentName">Assistant name</label>
          <input id="asstAgentName" class="input">
        </div>

        <div class="field">
          <label for="asstAgentType">Assistant type</label>
          <input id="asstAgentType" class="input" readonly>
        </div>

        <div class="field">
          <label for="asstPhoneNumber">Assistant phone number</label>
          <input id="asstPhoneNumber" class="input" readonly>
          <p id="asstPhoneHint" class="muted" style="font-size:0.8rem;margin-top:4px;" hidden>
            No phone number yet? Buy a number below first.
          </p>
        </div>

        <div class="field">
          <label for="asstAgentVoice">Assistant voice</label>
          <select id="asstAgentVoice" class="input">
            <option value='11labs-Billy'>Billy - male, young</option>
            <option value='11labs-Lily'>Lily - female, young</option>
            <option value='11labs-Marissa'>Marissa - female, young</option>
            <option value='11labs-Bing'>Bing - male, young</option>
            <option value='11labs-Jenny'>Jenny - female, young</option>
            <option value='11labs-Lucas'>Lucas - male, middle-aged</option>
            <option value='11labs-Brian'>Brian - male, young</option>
            <option value='11labs-Kate'>Kate - female, middle-aged</option>
            <option value='11labs-Jason'>Jason - male, young</option>
            <option value='11labs-Ethan'>Ethan - male, young</option>
            <option value='11labs-Paul'>Paul - male, old</option>
            <option value='11labs-John'>John - male, middle-aged</option>
            <option value='11labs-Adrian'>Adrian - male, young</option>
            <option value='11labs-Gilfoy'>Gilfoy - male, middle-aged</option>
            <option value='11labs-Zuri'>Zuri - female, old</option>
            <option value='11labs-Steve'>Steve - male, old</option>
            <option value='11labs-Grace'>Grace - female, middle-aged</option>
            <option value='11labs-Chloe'>Chloe - female, young</option>
            <option value='11labs-Max'>Max - male, middle-aged</option>
            <option value='11labs-Anna'>Anna - female, young</option>
            <option value='11labs-Julia'>Julia - female, middle-aged</option>
            <option value='11labs-victoria'>Victoria - female, young</option>
            <option value='11labs-Susan'>Susan - female, middle-aged</option>
            <option value='11labs-Emily'>Emily - female, middle-aged</option>
            <option value='11labs-Kathrine'>Kathrine - female, middle-aged</option>
            <option value='11labs-Andrew'>Andrew - male, young</option>
            <option value='11labs-Nina'>Nina - female, middle-aged</option>
            <option value='11labs-Myra'>Myra - female, young</option>
            <option value='11labs-Evie'>Evie - female, young</option>
            <option value='11labs-James'>James - male, old</option>
            <option value='11labs-Cimo'>Cimo - female, middle-aged</option>
            <option value='11labs-Ryan'>Ryan - male, young</option>
            <option value='11labs-Mia'>Mia - female, middle-aged</option>
          </select>
        </div>
                <div class="field">
          <label for="asstKnowledgeFile">Knowledge base</label>
          <input id="asstKnowledgeFile" type="file" class="input">
        </div>

        <div class="field">
          <label for="asstWebhookUrl">
            Webhook URL  
            <span class="muted" style="display:block;font-size:0.8rem;margin-top:2px;">
              To get phone call results to your systems.
            </span>
          </label>
          <input id="asstWebhookUrl" class="input">
        </div>

        <div class="field">
          <label for="asstPublished">Is assistant published</label>
          <input id="asstPublished" class="input" readonly>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
<div>

  <!-- Intro stays (optional) -->
  <div class="field">
    <label for="asstIntroPrompt">Intro</label>
    <textarea id="asstIntroPrompt" class="input" rows="6"></textarea>
  </div>

  <!-- Desired outcome -->
  <div class="field" style="margin-top:16px;">
    <label for="asstDesiredOutcome">Desired outcome</label>
    <select id="asstDesiredOutcome" class="input">
      <option value="book_meeting">Book a meeting</option>
      <option value="transfer_call">Transfer call</option>
      <option value="send_information">Send information</option>
    </select>
  </div>

  <!-- BOOK A MEETING -->
  <div id="outcomeBookMeeting" style="margin-top:14px;">
    <div class="field">
      <label for="asstCalApiKey">
        Cal.com API key
        <span class="muted" style="display:block;font-size:0.8rem;margin-top:2px;">
          <a href="https://cal.com/docs/api-reference/v2/introduction#authentication" target="_blank">
            How to get your API key
          </a>
        </span>
      </label>
      <input id="asstCalApiKey" class="input" placeholder="cal_live_xxx">
    </div>

    <div class="field">
      <label for="asstCalEventTypeId">
        Cal.com Event Type ID
        <span class="muted" style="display:block;font-size:0.8rem;margin-top:2px;">
          <a href="https://cal.com/help/event-types/eventtype-id" target="_blank">
            Where to find Event Type ID
          </a>
        </span>
      </label>
      <input id="asstCalEventTypeId" class="input" placeholder="123456">
    </div>

    <div class="field">
      <label>Check time availability before booking</label>
      <div style="display:flex;gap:16px;margin-top:6px;">
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstCalCheckAvailabilityYes">
          Yes
        </label>
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstCalCheckAvailabilityNo">
          No
        </label>
      </div>
    </div>
  </div>

  <!-- TRANSFER CALL -->
  <div id="outcomeTransferCall" style="margin-top:14px;" hidden>
    <div class="field">
      <label>Transfer type</label>
      <div style="display:flex;gap:16px;margin-top:6px;">
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstTransferCold"> Cold transfer
        </label>
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstTransferWarm"> Warm transfer
        </label>
      </div>
    </div>

    <div id="outcomeWarmDetails" hidden>
      <div class="field">
        <label for="asstTransferPhone">Receiving agent phone number</label>
        <input id="asstTransferPhone" class="input" placeholder="+1 555 123 4567">
      </div>

      <div class="field">
        <label for="asstTransferWhisper">Whisper message</label>
        <textarea id="asstTransferWhisper" class="input" rows="4"></textarea>
      </div>

      <div class="field">
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstTransferDebrief">
          Debrief receiving agent before connecting
        </label>
      </div>
    </div>
  </div>

  <!-- SEND INFORMATION -->
  <div id="outcomeSendInfo" style="margin-top:14px;" hidden>
    <div class="field">
      <label>Send via</label>
      <div style="display:flex;gap:16px;margin-top:6px;">
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstSendSms"> SMS
        </label>
        <label style="display:flex;align-items:center;gap:8px;">
          <input type="checkbox" id="asstSendSmsEmail"> SMS + email
        </label>
      </div>
    </div>

    <div id="outcomeSendInfoDetails" hidden>
      <div class="field">
        <label for="asstSendMessage">Message</label>
        <textarea id="asstSendMessage" class="input" rows="4"></textarea>
      </div>

      <div class="field">
        <label for="asstSendDoc">Document upload</label>
        <input id="asstSendDoc" type="file" class="input">
      </div>

      <div class="field" id="asstCcWrap" hidden>
        <label for="asstCcEmail">CC email address</label>
        <input id="asstCcEmail" class="input">
      </div>
    </div>
  </div>

</div>
      </div>
    </div>

    <div style="margin-top:18px;display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
      <button type="submit" class="btn-primary" id="asstSaveBtn">Save and Publish</button>

      <button type="button" class="btn-secondary" id="asstDeleteBtn">
        <span style="color:#FF0000;">Delete assistant</span>
      </button>

      <span id="asstStatus" class="muted"></span>
    </div>
  </form>
</section>
</div>
<!-- Buy number card -->
<div class="card" id="asstBuyCard" style="margin-top:32px" hidden>
  <h3>Buy a phone number</h3>
  <p class="muted" style="font-size:0.85rem;margin-bottom:14px;">
    Get a dedicated U.S. phone number for outbound calls.
  </p>

  <div class="grid-2">
    <div>
      <div class="field">
        <label for="asstPhoneAreaSelect">Preferred phone number area (US only)</label>
        <select id="asstPhoneAreaSelect" class="input"></select>
      </div>
    </div>
    <div>
      <p class="muted" style="font-size:0.8rem;">
        Choose an area / region. We'll try to match this area code when provisioning your number.
      </p>
    </div>
  </div>

  <div style="margin-top:12px;display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
    <button type="button" class="btn-secondary" id="asstBuyNumberBtn">
      Buy number
    </button>

    <!-- Processing loader -->
    <span id="asstBuySpinner" style="display:none;align-items:center;gap:8px;">
      <span class="spinner"></span>
      <span id="asstBuySpinnerText" class="muted">Processing…</span>
    </span>

    <span id="asstBuyStatus" class="muted"></span>
  </div>
</div>
