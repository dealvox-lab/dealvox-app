<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="stylesheet" href="/assets/css/account.css?v=8">
</head>
<body>
<section class="account-layout">
  <!-- Mobile topbar -->
  <header class="mobile-topbar" aria-label="Account menu">
    <a class="mobile-brand" href="https://dealvox-lab.github.io/" target="_blank" rel="noopener noreferrer">
      <img src="/assets/logo.png" alt="Dealvox logo" />
    </a>

  <button
    class="burger-btn burger-classic"
    type="button"
    aria-label="Open menu"
    aria-controls="accountSidebar"
    aria-expanded="false"
    id="burgerBtn"
  >
    <span class="burger-line"></span>
    <span class="burger-line"></span>
    <span class="burger-line"></span>
  </button>
  </header>

  <!-- Mobile overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay" hidden></div>
  
  <!-- Sidebar -->
  <aside class="account-sidebar" id="accountSidebar" aria-label="Account navigation">
    <div class="sidebar-brand">
      <div class="brand-logo-wrapper">
        <a href="https://dealvox-lab.github.io/" target="_blank" rel="noopener noreferrer">
          <img src="/assets/logo.png" alt="Dealvox logo">
        </a>
      </div>
      <div class="brand-text">
        <span id="sidebarEmail" class="brand-email">Loadingâ€¦</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a href="#account"   data-view="account"   class="nav-link">Profile & Limits</a>
      <a href="#assistant"    data-view="assistant"    class="nav-link">Assistant</a>
      <a href="#voices" class="nav-link" data-view="voices">Voices</a>
      <a href="#api"       data-view="api"       class="nav-link">API settings</a>
      <a href="#calls_history" data-view="calls_history" class="nav-link">Call History</a>
      <a href="#billing"   data-view="billing"   class="nav-link">Plan & Billing</a>
      <a href="#help"      data-view="help"      class="nav-link">Help</a>
    </nav>

    <a href="/logout" class="logout-btn">Logout</a>
  </aside>

  <!-- Content area -->
  <main id="accountContent"
        class="account-content"
        tabindex="-1"
        aria-live="polite"
        aria-busy="false">

    <!-- ðŸ‘‡ THIS is where your partial HTML must end up -->
    <div id="accountView" class="account-inner">
      <div class="loading">
        <div class="spinner"></div>
        <div>Loadingâ€¦</div>
      </div>
    </div>
  </main>
</section>
<script>
  window.SUPABASE_URL = "https://rtidfgnigtsxdszypkwr.supabase.co";
  window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ0aWRmZ25pZ3RzeGRzenlwa3dyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MjM5NjEsImV4cCI6MjA3ODQ5OTk2MX0.DtqhhfZlFOnQLYGy6qTtgaia38bTPB_pvNEQGhLt4T0";
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  window.supabaseClient = supabase.createClient(
    window.SUPABASE_URL,
    window.SUPABASE_ANON_KEY
  );
</script>

<script src="/assets/js/phone-area-codes.js"></script>
<script src="/assets/js/account.js?v=19"></script>
<script src="/assets/js/account-voices.js"></script>
<script src="/assets/js/account-billing.js"></script>
<script src="/assets/js/call-history.js"></script>
<script src="/assets/js/account-pricing.js?v=999"></script>
<script>
  (function () {
    const btn = document.getElementById("burgerBtn");
    const overlay = document.getElementById("sidebarOverlay");
    const sidebar = document.getElementById("accountSidebar");

    if (!btn || !overlay || !sidebar) return;

    function openMenu() {
      document.body.classList.add("sidebar-open");
      overlay.hidden = false;
      btn.setAttribute("aria-expanded", "true");
    }

    function closeMenu() {
      document.body.classList.remove("sidebar-open");
      overlay.hidden = true;
      btn.setAttribute("aria-expanded", "false");
    }

    btn.addEventListener("click", () => {
      document.body.classList.contains("sidebar-open") ? closeMenu() : openMenu();
    });

    overlay.addEventListener("click", closeMenu);

    // Close after clicking a menu item (mobile UX)
    sidebar.querySelectorAll(".nav-link, .logout-btn").forEach((a) => {
      a.addEventListener("click", () => {
        if (window.matchMedia("(max-width: 820px)").matches) closeMenu();
      });
    });

    // ESC closes
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeMenu();
    });
  })();
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn   = document.getElementById("asstKbHelpBtn");
  const modal = document.getElementById("asstKbHelpModal");
  const close = document.getElementById("asstKbHelpClose");

  if (!modal) return;

  // FORCE it closed on load, no matter what
  modal.hidden = true;

  function openModal() {
    modal.hidden = false;
  }

  function closeModal() {
    modal.hidden = true;
  }

  if (btn) {
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      openModal();
    });
  }

  if (close) {
    close.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      closeModal();
    });
  }

  // Click outside modal-card closes it
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });

  // ESC closes it
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.hidden === false) closeModal();
  });
});
</script>

<!-- Retell Chat Widget -->
<script
  id="retell-widget"
  src="https://dashboard.retellai.com/retell-widget.js"
  type="module"
  data-public-key="public_key_36b4c232f3d237ac36278"
  data-agent-id="agent_2b6b7e634087b8c80e7011f0e4"
  data-agent-version="0"
  data-title="Dealvox AI Assistant"
  data-logo-url="https://your-site.com/assets/logo.png"
  data-color="#ff7a3c"
  data-bot-name="Dealvox AI"
  data-popup-message="Need help? Ask Dealvox AI anything about our product."
  data-show-ai-popup="true"
  data-show-ai-popup-time="5"
  data-auto-open="false"
  data-dynamic='{"source": "website", "page": "pricing"}'
></script>
</body>
</html>
